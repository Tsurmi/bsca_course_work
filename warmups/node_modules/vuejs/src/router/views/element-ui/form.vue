<template>
    <div class="nftn-el-form">
        <nftn-el-form
            action-grid="3-1"
            v-bind:grid="grid"
            v-bind:inputs="inputs"
            v-bind:rules="rules"
            v-model="values">

            <template slot="grid-0-0">
                替换 grid-0-0 网格区域内容，原来“测试-1”在这里
            </template>

            <template slot="test2.label">
                替换“测试-2”的 label 内容
            </template>

            <template slot="test3.input">
                替换“测试-3”的 input 内容
            </template>

        </nftn-el-form>
        <p>
            <a href="javascript:;" v-on:click="change">change</a>
        </p>
        <p>
            <input type="text" v-model="newInput.grid">
            <input type="text" v-model="newInput.label">
            <input type="text" v-model="newInput.name">
            <input type="text" v-model="newInput.type">
            <button v-on:click="add">添加</button>
        </p>
        <p>
            {{values}}
        </p>
    </div>
</template>

<script>
    import '@/components/element-ui/form';

    export default {
        data () {
            return {
                newInput: {
                    grid: '0-0',
                    label: '',
                    name: '',
                    type: 'text'
                },
                grid: {
                    rows: [
                        [6, 12, 6],
                        [6, 6, 6, 6],
                        [6, 4, 4, 4, 6],
                        [6, 12, 6]
                    ],
                    gap: 15
                },
                inputs: [
                    {
                        label: '测试-1',
                        name: 'test1'
                    },
                    {
                        grid: '0-2',
                        label: '测试-2',
                        name: 'test2'
                    },
                    {
                        grid: '0-2',
                        label: '测试-3',
                        name: 'test3'
                    },
                    {
                        grid: '0-1',
                        label: '姓名',
                        name: 'name'
                    },
                    {
                        grid: '0-1',
                        label: '年龄',
                        name: 'age',
                        rules: [{ required: true, message: '请输入年龄' }]
                    },
                    {
                        grid: '1-1',
                        label: '性别(含 grid 分离模式)',
                        type: 'radio',
                        name: 'sex',
                        datasource: [{ name: '男', value: 'male' }, { name: '女', value: 'fmale' }],
                        rules: [{ required: true, message: '请输入姓名' }]
                    },
                    {
                        grid: '1-2',
                        label: ' ',
                        type: 'radio',
                        name: 'sex',
                        datasource: [{ name: '女', value: 'fmale' }]
                    },
                    {
                        grid: '1-1',
                        label: '技能专长 （分离）',
                        name: 'likes',
                        type: 'checkbox',
                        datasource: [{ name: 'java语言', value: 'java', disabled: true }, { name: 'javascript语言', value: 'js' }]
                    },
                    {
                        grid: '1-2',
                        label: ' ',
                        name: 'likes',
                        type: 'checkbox',
                        min: 1,
                        max: 2,
                        datasource: [{ name: 'java语言', value: 'java' }, { name: 'php语言', value: 'php' }, { name: 'go语言', value: 'go' }]
                    },
                    {
                        grid: '2-1',
                        label: '省份',
                        name: 'province',
                        type: 'select',
                        datasource: [
                            {
                                name: '省-1',
                                value: 'p1',
                                items: [{ name: '城1-1', value: 'c1' }]
                            },
                            {
                                name: '省-2',
                                value: 'p2',
                                items: [{ name: '城2-1', value: 'c2-1' }, { name: '城2-2', value: 'c2-2' }]
                            }
                        ]
                    },
                    {
                        grid: '2-2',
                        label: '城市',
                        name: 'city',
                        type: 'select',
                        datasource: [],
                        cascade: {
                            parent: 'province',
                            key: 'items'
                        }
                    },
                    {
                        grid: '2-3',
                        label: '地区',
                        name: 'district',
                        type: 'select',
                        datasource: []
                    },
                    {
                        grid: '3-1',
                        label: '备注',
                        name: 'note',
                        type: 'textarea',
                        rows: 3
                    }
                ],
                values: {
                    name: 'testname',
                    province: 'p1'
                },
                rules: {
                    name: { required: true },
                    sex: { required: true, message: '请选择性别' }
                }
            };
        },
        methods: {
            change () {
                // this.inputs.filter(input => { return input.name === 'sex'; })
                //     .forEach(input => {
                //         input.datasource = [{ name: 'c1', value: '1' }];
                //     });
                console.log('nothing happened');
            },
            add () {
                this.inputs.push({
                    grid: this.newInput.grid || '0-0',
                    name: this.newInput.name,
                    label: this.newInput.label,
                    type: this.newInput.type || 'text'
                });

                this.newInput.name = '';
                this.newInput.label = '';
            }
        }
    };
</script>

<style>
    .el-col {
        background-color: #EFF2F7;
        height: 100%;
    }
    .el-col .nftn-el-grid-content {
        min-height: 30px;
        line-height: 30px;
        height: 100%;
        background-color: #E5E9F2;
    }
    .el-col:nth-child(2n+1) .nftn-el-grid-content {
        background-color: #D3DCE6;
    }
</style>
